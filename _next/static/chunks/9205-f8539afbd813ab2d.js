!(function () {
  try {
    var e =
        "undefined" != typeof window
          ? window
          : "undefined" != typeof global
          ? global
          : "undefined" != typeof self
          ? self
          : {},
      t = new e.Error().stack;
    t &&
      ((e._sentryDebugIds = e._sentryDebugIds || {}),
      (e._sentryDebugIds[t] = "87668d8d-8a5f-4ca2-a49f-e94496adbc40"),
      (e._sentryDebugIdIdentifier =
        "sentry-dbid-87668d8d-8a5f-4ca2-a49f-e94496adbc40"));
  } catch (e) {}
})(),
  (self.webpackChunk_N_E = self.webpackChunk_N_E || []).push([
    [9205],
    {
      10957: function (e, t, r) {
        "use strict";
        var a = r(85893);
        r(67294),
          (t.Z = (e) => {
            let {
              stroke: t,
              strokeWidth: r = 1,
              width: n = 24,
              height: i = 24,
            } = e;
            return (0, a.jsx)("svg", {
              width: n,
              height: i,
              fill: "none",
              viewBox: "0 0 24 24",
              children: (0, a.jsx)("path", {
                stroke: null != t ? t : "#5EE192",
                strokeWidth: r,
                strokeLinecap: "round",
                strokeLinejoin: "round",
                d: "M6.75 14.25c-.699 0-1.048 0-1.324-.114a1.5 1.5 0 0 1-.812-.812C4.5 13.048 4.5 12.699 4.5 12V6.9c0-.84 0-1.26.163-1.581a1.5 1.5 0 0 1 .656-.656c.32-.163.74-.163 1.581-.163H12c.699 0 1.048 0 1.324.114a1.5 1.5 0 0 1 .812.812c.114.276.114.625.114 1.324m-2.1 12.75h4.95c.84 0 1.26 0 1.581-.163a1.5 1.5 0 0 0 .655-.656c.164-.32.164-.74.164-1.581v-4.95c0-.84 0-1.26-.163-1.581a1.5 1.5 0 0 0-.656-.656c-.32-.163-.74-.163-1.581-.163h-4.95c-.84 0-1.26 0-1.581.163a1.5 1.5 0 0 0-.656.656c-.163.32-.163.74-.163 1.581v4.95c0 .84 0 1.26.163 1.581a1.5 1.5 0 0 0 .656.655c.32.164.74.164 1.581.164Z",
              }),
            });
          });
      },
      55787: function (e, t, r) {
        "use strict";
        var a = r(85893);
        r(67294),
          (t.Z = () =>
            (0, a.jsx)("svg", {
              xmlns: "http://www.w3.org/2000/svg",
              width: 20,
              height: 20,
              fill: "none",
              viewBox: "0 0 20 20",
              children: (0, a.jsx)("path", {
                fill: "#fff",
                d: "M16.93 3.463A16.491 16.491 0 0 0 12.86 2.2a.062.062 0 0 0-.066.031c-.175.313-.37.72-.506 1.041a15.226 15.226 0 0 0-4.573 0 10.538 10.538 0 0 0-.515-1.04.064.064 0 0 0-.065-.032 16.447 16.447 0 0 0-4.07 1.263.058.058 0 0 0-.028.023C.444 7.36-.266 11.138.083 14.869a.069.069 0 0 0 .026.047 16.586 16.586 0 0 0 4.994 2.525.064.064 0 0 0 .07-.023c.385-.526.728-1.08 1.022-1.662a.063.063 0 0 0-.035-.088 10.917 10.917 0 0 1-1.56-.744.064.064 0 0 1-.007-.106c.105-.079.21-.16.31-.243a.062.062 0 0 1 .065-.009c3.273 1.495 6.817 1.495 10.051 0a.062.062 0 0 1 .066.008c.1.083.204.165.31.244a.064.064 0 0 1-.005.106c-.499.292-1.017.538-1.561.743a.064.064 0 0 0-.034.089 13.3 13.3 0 0 0 1.02 1.661.063.063 0 0 0 .07.024 16.532 16.532 0 0 0 5.003-2.525.065.065 0 0 0 .026-.046c.417-4.314-.699-8.061-2.957-11.383a.05.05 0 0 0-.026-.024ZM6.684 12.597c-.985 0-1.797-.904-1.797-2.015 0-1.111.796-2.016 1.797-2.016 1.01 0 1.814.912 1.798 2.016 0 1.11-.796 2.015-1.798 2.015Zm6.646 0c-.986 0-1.797-.904-1.797-2.015 0-1.111.796-2.016 1.797-2.016 1.009 0 1.813.912 1.797 2.016 0 1.11-.788 2.015-1.797 2.015Z",
              }),
            }));
      },
      60857: function (e, t, r) {
        "use strict";
        var a = r(85893);
        r(67294),
          (t.Z = function (e) {
            return (0, a.jsxs)("svg", {
              ...e,
              viewBox: "0 0 16 16",
              fill: "none",
              xmlns: "http://www.w3.org/2000/svg",
              children: [
                (0, a.jsx)("path", {
                  d: "M12.9525 9.50391V11.651C12.9525 12.2506 12.4536 12.7384 11.8401 12.7384H4.25333C3.64 12.7384 3.14093 12.2506 3.14093 11.651V9.50391H2V11.651C2 12.8656 3.0108 13.8539 4.2532 13.8539H11.84C13.0824 13.8539 14.0932 12.8656 14.0932 11.651V9.50391H12.9523H12.9525Z",
                  fill: "white",
                }),
                (0, a.jsx)("path", {
                  d: "M7.57866 12.0171C7.69306 12.13 7.84599 12.1926 8.00932 12.1934H8.01226C8.17439 12.1934 8.32679 12.1322 8.44172 12.021L11.7516 8.81511C11.8672 8.70324 11.9312 8.55364 11.932 8.39417C11.9328 8.23457 11.8701 8.08444 11.7557 7.97151L11.6605 7.87751C11.546 7.76457 11.3931 7.70204 11.2299 7.70124H11.2272C11.0651 7.70124 10.9125 7.76244 10.7977 7.87377L8.78866 9.81964V3.00684C8.78866 2.59164 8.44319 2.25391 8.01852 2.25391C7.59386 2.25391 7.24839 2.59164 7.24839 3.00684V9.80737L5.26466 7.84991C5.15026 7.73697 4.99732 7.67444 4.83399 7.67377H4.83119C4.66906 7.67377 4.51652 7.73497 4.40172 7.84617L4.30546 7.93937C4.06639 8.17097 4.06466 8.54937 4.30146 8.78311L7.57892 12.0174L7.57866 12.0171Z",
                  fill: "white",
                }),
              ],
            });
          });
      },
      78517: function (e, t, r) {
        "use strict";
        var a = r(85893);
        r(67294),
          (t.Z = () =>
            (0, a.jsx)("svg", {
              xmlns: "http://www.w3.org/2000/svg",
              width: 20,
              height: 20,
              fill: "none",
              viewBox: "0 0 20 20",
              children: (0, a.jsx)("path", {
                fill: "#fff",
                fillRule: "evenodd",
                d: "M3.786.05h14.156v2.824h4.025l-.844 2.825h-.714v11.427c.358 0 .65.287.65.642v.77h.13c.358 0 .649.288.649.642v.77h-7.273v-.77c0-.354.29-.642.65-.642h.13v-.77c0-.309.22-.566.512-.628l-.014-6.306c-.23-2.519-2.37-4.493-4.98-4.493-2.608 0-4.75 1.974-4.979 4.494l-.013 6.3c.346.05.772.315.772.633v.77h.13c.358 0 .65.288.65.642v.77H.15v-.77c0-.354.29-.642.649-.642h.13v-.77c0-.355.29-.642.65-.642V5.7H.863L.02 2.874h3.766V.05Z",
                clipRule: "evenodd",
              }),
            }));
      },
      69737: function (e, t, r) {
        "use strict";
        var a = r(85893);
        t.Z = () =>
          (0, a.jsx)("svg", {
            width: "10",
            height: "2",
            viewBox: "0 0 10 2",
            fill: "none",
            xmlns: "http://www.w3.org/2000/svg",
            children: (0, a.jsx)("path", {
              d: "M9 1L1 1",
              stroke: "white",
              strokeWidth: "1.2",
              strokeLinecap: "round",
            }),
          });
      },
      14483: function (e, t, r) {
        "use strict";
        var a = r(85893);
        r(67294),
          (t.Z = () =>
            (0, a.jsx)("svg", {
              xmlns: "http://www.w3.org/2000/svg",
              width: 20,
              height: 20,
              fill: "none",
              viewBox: "0 0 20 20",
              children: (0, a.jsx)("path", {
                fill: "#fff",
                fillRule: "evenodd",
                d: "M2.092 9.04c4.922-2.143 8.203-3.557 9.845-4.24 4.688-1.95 5.663-2.289 6.298-2.3.14-.002.451.032.654.196.17.139.218.326.24.458.022.131.05.43.028.664-.254 2.67-1.353 9.147-1.912 12.137-.237 1.265-.703 1.69-1.154 1.731-.98.09-1.725-.648-2.674-1.27-1.486-.974-2.325-1.58-3.768-2.531-1.666-1.098-.586-1.702.364-2.689.248-.258 4.568-4.187 4.652-4.543.01-.045.02-.21-.08-.299-.098-.087-.244-.057-.349-.033-.149.033-2.522 1.602-7.12 4.706-.674.463-1.284.688-1.831.676-.603-.013-1.762-.34-2.624-.62-1.057-.344-1.898-.526-1.825-1.11.039-.304.457-.615 1.256-.932Z",
                clipRule: "evenodd",
              }),
            }));
      },
      98376: function (e, t, r) {
        "use strict";
        var a = r(85893);
        r(67294),
          (t.Z = (e) => {
            let { height: t = 20, width: r = 20 } = e;
            return (0, a.jsx)("svg", {
              xmlns: "http://www.w3.org/2000/svg",
              width: r,
              height: t,
              fill: "none",
              viewBox: "0 0 20 20",
              children: (0, a.jsx)("path", {
                fill: "#fff",
                d: "M15.27 1.586h2.812l-6.142 7.02 7.225 9.552h-5.657l-4.43-5.794-5.071 5.794H1.194l6.57-7.509L.831 1.586h5.801l4.005 5.295 4.633-5.295Zm-.986 14.889h1.558L5.787 3.18H4.115l10.169 13.295Z",
              }),
            });
          });
      },
      4359: function (e, t, r) {
        "use strict";
        r.d(t, {
          Z: function () {
            return m;
          },
        });
        var a = r(85893),
          n = r(90639),
          i = r(24620),
          l = r(18182),
          s = r(9305);
        let c = (e) =>
            (null == e ? void 0 : e.length)
              ? e.map((e) => ({
                  leg: {
                    contractId: 0,
                    quantity: "".concat(e.size),
                    side: e.side,
                  },
                  referencePrice: e.averageExecutionPrice || 0,
                  payoff: e.type,
                  strike: "".concat(e.strike),
                }))
              : [],
          o = (e, t) =>
            (null == e ? void 0 : e.length)
              ? null == e
                ? void 0
                : e.map((e) => ({
                    contractId: 0,
                    quantity: "".concat(e.size),
                    side: e.side,
                    premium: e.averageExecutionPrice || 0,
                    payoff: e.type,
                    economics: { strike: e.strike || 0, expiry: t },
                  }))
              : [];
        var d = r(58217),
          u = r(59731),
          m = (e) => {
            let { data: t, tableType: r, showProfitLoss: m = !1 } = e,
              { currentExpiryDate: x } = (0, u.qr)();
            if (!t) return null;
            let h = c(t),
              p = o(t, x),
              f = r === n.vj.HISTORY ? (0, l.s)(p) : [];
            return (0, a.jsxs)("div", {
              children: [
                (0, a.jsx)("h3", { className: "mb-13", children: "Strategy" }),
                h &&
                  (0, a.jsx)(i.Z, {
                    headers: r === n.vj.HISTORY ? d.$1 : d.TI,
                    showStrike: r === n.vj.HISTORY,
                    hideClear: !0,
                    strategies: h,
                  }),
                f &&
                  r === n.vj.HISTORY &&
                  (0, a.jsx)(s.Z, {
                    showProfitLoss: m,
                    chartData: f,
                    height: 210,
                    id: "dynamic-chart",
                  }),
              ],
            });
          };
      },
      14227: function (e, t, r) {
        "use strict";
        var a = r(85893),
          n = r(24514),
          i = r(45338),
          l = r(77125),
          s = r(59421),
          c = r(52867),
          o = r(35475),
          d = r.n(o),
          u = r(59731),
          m = r(18666),
          x = r(70757);
        t.Z = (e) => {
          var t, r, o, h, p, f;
          let { auctionSubmission: w, orderSummary: y, isRFQ: v } = e,
            { collateralSummary: g } = (0, s.F)(),
            {
              currentExpiryDate: j,
              spotContract: b,
              underlyingCurrency: C,
            } = (0, u.qr)(),
            N =
              ((null == y
                ? void 0
                : null === (t = y.orderLock) || void 0 === t
                ? void 0
                : t.underlierAmount) || 0) - g[C].orderValue,
            P =
              ((null == y
                ? void 0
                : null === (r = y.orderLock) || void 0 === r
                ? void 0
                : r.numeraireAmount) || 0) - g.USDC.orderValue,
            S =
              null == w
                ? void 0
                : null === (h = w.order) || void 0 === h
                ? void 0
                : null === (o = h.legs) || void 0 === o
                ? void 0
                : o.reduce((e, t) => e + (Number(t.quantity) || 0), 0),
            k = Array.from(
              new Set(
                null == w
                  ? void 0
                  : null === (f = w.order) || void 0 === f
                  ? void 0
                  : null === (p = f.legs) || void 0 === p
                  ? void 0
                  : p.map((e) => {
                      var t;
                      return e.contractId ===
                        (null == b ? void 0 : b.contractId)
                        ? "-"
                        : (0, m.lV)(
                            null !== (t = e.expiry) && void 0 !== t
                              ? t
                              : j.toString()
                          );
                    })
              )
            ),
            Z = void 0 !== S ? Math.abs(S) : void 0,
            F = Number(null == w ? void 0 : w.order.totalNetPrice) || 0;
          return (0, a.jsxs)(a.Fragment, {
            children: [
              (0, a.jsxs)(n.Z, {
                margin: "mb-16",
                children: [
                  (0, a.jsx)("h5", { className: "flexGrow", children: "Size" }),
                  (0, a.jsx)("div", {
                    className: d().valueWrapper,
                    children: (0, a.jsx)("span", {
                      className: d().amountLabel,
                      children: Z ? (0, i.uM)(Z) : "-",
                    }),
                  }),
                ],
              }),
              (0, a.jsxs)(n.Z, {
                margin: "mb-16",
                children: [
                  (0, a.jsx)("h5", {
                    className: "flexGrow",
                    children: "Order Limit",
                  }),
                  (0, a.jsxs)("div", {
                    className: d().valueWrapper,
                    children: [
                      (0, a.jsx)("span", {
                        className: d().amountLabel,
                        children:
                          (0, i.uM)(v ? F : Math.abs(F), "string", "USDC") ||
                          "-",
                      }),
                      (0, a.jsx)(l.Z, {}),
                      (0, a.jsx)("span", {
                        className: d().currencyLabel,
                        children: "USDC",
                      }),
                    ],
                  }),
                ],
              }),
              (0, a.jsxs)(n.Z, {
                margin: "mb-16",
                children: [
                  (0, a.jsx)("h5", {
                    className: "flexGrow",
                    children: "Collateral Requirement",
                  }),
                  (0, a.jsxs)("div", {
                    children: [
                      (0, a.jsx)("div", {
                        className: d().valueWrapper,
                        children: (0, a.jsx)(c.Z, {
                          amount: (0, i.uM)(
                            Math.max(Number(N), 0),
                            "string",
                            C
                          ),
                          symbol: (0, x.XX)(C),
                          currency: C,
                        }),
                      }),
                      (0, a.jsx)("div", {
                        className: d().valueWrapper,
                        children: (0, a.jsx)(c.Z, {
                          amount: (0, i.uM)(
                            Math.max(Number(P), 0),
                            "string",
                            "USDC"
                          ),
                          symbol: (0, a.jsx)(l.Z, {}),
                          currency: "USDC",
                        }),
                      }),
                    ],
                  }),
                ],
              }),
              (0, a.jsxs)(n.Z, {
                margin: "mb-16",
                children: [
                  (0, a.jsx)("h5", {
                    className: "flexGrow",
                    children: "Expiry Date",
                  }),
                  (0, a.jsx)("div", {
                    className: d().valueWrapper,
                    children: (0, a.jsx)("div", {
                      className:
                        "tw-flex tw-divide-x [&>span]:tw-px-1 [&>span]:tw-leading-none",
                      children: k.map((e, t) =>
                        (0, a.jsx)(
                          "span",
                          { className: d().amountLabel, children: e },
                          t
                        )
                      ),
                    }),
                  }),
                ],
              }),
              (0, a.jsxs)(n.Z, {
                margin: "mb-16",
                children: [
                  (0, a.jsx)("h5", {
                    className: "flexGrow",
                    children: "Expected Fee*",
                  }),
                  (0, a.jsxs)("div", {
                    className: d().valueWrapper,
                    children: [
                      (0, a.jsx)("span", {
                        className: d().amountLabel,
                        children: (null == y ? void 0 : y.orderFees)
                          ? (0, i.uM)(
                              Number(y.orderFees.numeraireAmount),
                              "string",
                              "USDC"
                            )
                          : "-",
                      }),
                      (0, a.jsx)(l.Z, {}),
                      (0, a.jsx)("span", {
                        className: d().currencyLabel,
                        children: "USDC",
                      }),
                    ],
                  }),
                ],
              }),
              (0, a.jsxs)(n.Z, {
                margin: "mb-16",
                classes: "tw-italic tw-text-sm tw-text-ithaca-white-60",
                children: [
                  (0, a.jsx)("h5", {
                    className: "flexGrow",
                    children: "Locked Fee Amount",
                  }),
                  (0, a.jsxs)("div", {
                    className: d().valueWrapper,
                    children: [
                      (0, a.jsx)("span", {
                        className: "",
                        children: (null == y ? void 0 : y.orderFeesLocked)
                          ? (0, i.uM)(
                              Number(y.orderFeesLocked.numeraireAmount),
                              "string",
                              "USDC"
                            )
                          : "-",
                      }),
                      (0, a.jsx)(l.Z, {}),
                      (0, a.jsx)("span", {
                        className: d().currencyLabel,
                        children: "USDC",
                      }),
                    ],
                  }),
                ],
              }),
              (0, a.jsx)("div", { className: d().divider }),
              (0, a.jsxs)(n.Z, {
                margin: "mb-16",
                children: [
                  (0, a.jsx)("h5", {
                    className: "flexGrow color-white",
                    children: "Total Premium",
                  }),
                  (0, a.jsxs)("div", {
                    className: d().valueWrapper,
                    children: [
                      (0, a.jsx)("span", {
                        className: d().amountLabel,
                        children:
                          ((null == y ? void 0 : y.orderFees) &&
                            (0, i.uM)(
                              Math.abs(
                                Number(
                                  null == w ? void 0 : w.order.totalNetPrice
                                ) + Number(y.orderFees.numeraireAmount)
                              ) || 0,
                              "string",
                              "USDC"
                            )) ||
                          "-",
                      }),
                      (0, a.jsx)(l.Z, {}),
                      (0, a.jsx)("span", {
                        className: d().currencyLabel,
                        children: "USDC",
                      }),
                    ],
                  }),
                ],
              }),
            ],
          });
        };
      },
      85056: function (e, t, r) {
        "use strict";
        var a = r(85893),
          n = r(67294),
          i = r(90639),
          l = r(47236),
          s = r(12349),
          c = r(20847),
          o = r(74458),
          d = r(93967),
          u = r.n(d),
          m = r(10066),
          x = r(77768),
          h = r.n(x),
          p = r(13090);
        let f = () => (0, a.jsx)("div", {});
        t.Z = (e) => {
          let { contractId: t, isPreview: r, agentId: d } = e,
            { data: x = [], isLoading: w, error: y } = (0, s.X)(t, d),
            { showErrorToast: v } = (0, l.Z)();
          return ((0, n.useEffect)(() => {
            y &&
              !w &&
              (v({ title: "Error fetching position details", message: "" }),
              console.error("Error fetching position details", y));
          }, [y, w, v]),
          w)
            ? (0, a.jsx)(o.m, { className: "tw-min-h-[90px]" })
            : (0, a.jsxs)(a.Fragment, {
                children: [
                  (0, a.jsx)(f, {}),
                  (0, a.jsx)("div", {
                    className: h().headerExpandedTable,
                    children: "Strategy",
                  }),
                  (0, a.jsx)(f, {}),
                  d && (0, a.jsx)(f, {}),
                  i.QL.map((e, t) =>
                    (0, a.jsx)(
                      "div",
                      {
                        className: h().cell,
                        style: { flexDirection: "column", ...e.style },
                        children: (0, a.jsx)(
                          "div",
                          { className: h().cell, children: e.name },
                          t
                        ),
                      },
                      t
                    )
                  ),
                  (0, a.jsx)(f, {}),
                  (0, a.jsx)("div", {
                    style: { gridColumn: "b/n" },
                    children: (0, a.jsx)("div", { className: h().separator }),
                  }),
                  (0, a.jsx)(f, {}),
                  x.map((e, t) =>
                    (0, a.jsxs)(
                      n.Fragment,
                      {
                        children: [
                          (0, a.jsx)("div", {
                            style: { gridColumn: "a/n", marginTop: 5 },
                          }),
                          (0, a.jsx)(f, {}),
                          (0, a.jsx)("div", {
                            className: ""
                              .concat(h().cellContentExpanded, " ")
                              .concat(h().bolded),
                            children: e.orderDate,
                          }),
                          (0, a.jsx)("div", {
                            className: "".concat(h().cellContentExpanded),
                            children: (0, m._S)(e.currencyPair, r),
                          }),
                          (0, a.jsx)("div", {
                            className: h().cellContentExpanded,
                            children: e.product,
                          }),
                          (0, a.jsx)("div", {
                            className: u()(
                              h().cellContentExpanded,
                              "tw-items-end tw-justify-end"
                            ),
                            children: (0, p.U)(e.side),
                          }),
                          (0, a.jsx)("div", {
                            className: h().cellContentExpanded,
                            style: { justifyContent: "flex-end" },
                            children: (0, a.jsx)("span", {
                              className: h().date,
                              children: e.tenor,
                            }),
                          }),
                          (0, a.jsx)(f, {}),
                          (0, a.jsx)("div", {
                            className: h().cellContentExpanded,
                            style: { justifyContent: "flex-end" },
                            children: (0, a.jsx)(c.Z, {
                              value: e.orderLimit,
                              className: "!tw-flex-row",
                            }),
                          }),
                          (0, a.jsx)(f, {}),
                        ],
                      },
                      t
                    )
                  ),
                  (0, a.jsx)("div", {
                    style: { gridColumn: "a/n", marginTop: 15 },
                  }),
                ],
              });
        };
      },
      69280: function (e, t, r) {
        "use strict";
        var a = r(85893),
          n = r(67294),
          i = r(45217),
          l = r(37422),
          s = r(16795),
          c = r(77768),
          o = r.n(c),
          d = r(62582),
          u = r(23870),
          m = r(71367),
          x = r(43529),
          h = r(92400),
          p = r(15741),
          f = r(67253);
        t.Z = (e) => {
          let {
              updateSort: t,
              productFilter: r,
              setProductFilter: c,
              expiryFilter: w,
              type: y,
              setExpiryFilter: v,
              setStrikeFilter: g,
              strikeFilter: j,
              isExpirySingleChoice: b = !1,
              clearBannerPositions: C,
              strikeList: N,
              expiryList: P,
              productList: S,
              isAgentHeader: k = !1,
            } = e,
            Z = (0, n.useMemo)(() => {
              let e = (0, d.y6)(y);
              return k ? e.slice(0, e.length - 1) : e;
            }, [y]),
            [F, L] = (0, n.useState)(null),
            _ = (0, n.useRef)(null),
            D = (0, n.useRef)(null),
            I = (0, n.useRef)(null),
            { currentStep: E, isTutorialDisabled: M } = (0, n.useContext)(
              p.OnboardingContext
            ),
            A = (e) => () => {
              e === F ? L(null) : L(e);
            };
          (0, s.M)(() => {
            F && L(null);
          }),
            (0, n.useEffect)(() => {
              let e = (e) => {
                D.current &&
                  !D.current.contains(e.target) &&
                  I.current &&
                  !I.current.contains(e.target) &&
                  _.current &&
                  !_.current.contains(e.target) &&
                  L(null);
              };
              return (
                document.addEventListener("click", e, !0),
                () => {
                  document.removeEventListener("click", e, !0);
                }
              );
            }, []);
          let R = (e, t) => {
              let a = e.toUpperCase();
              "Product" === F &&
                (t ? c([...r, a]) : c(r.filter((e) => e !== a))),
                ("Expiry" === F || "Expiry Date" === F) &&
                  (b
                    ? w.includes(a)
                      ? v([])
                      : v([a])
                    : t
                    ? v([...w, a])
                    : v(w.filter((e) => e !== a))),
                "Strike" === F &&
                  (t ? g([...j, a]) : g(j.filter((e) => e !== a))),
                null == C || C();
            },
            T = (e) => {
              let n = e === F ? "" : o().hide;
              switch (e) {
                case "Close Position":
                  return (0, a.jsx)("span", {
                    className:
                      "tw-font-roboto tw-font-bold tw-text-ithaca-red-20",
                    children: "Close Position",
                  });
                case "Details":
                case "":
                  return null;
                case "Product":
                  return (0, a.jsxs)(a.Fragment, {
                    children: [
                      e,
                      (0, a.jsx)(m.r, { onClick: A(e), fill: r.length > 0 }),
                      (0, a.jsxs)("div", {
                        className: "".concat(o().filterDropdown, " ").concat(n),
                        ref: _,
                        children: [
                          S.map((e) =>
                            (0, a.jsx)(
                              x.T,
                              {
                                className: "mb-5",
                                labelClassName: "fs-xs-semibold nowrap",
                                checked: r.includes(e.toUpperCase()),
                                value: e,
                                label: e,
                                onChange: R,
                              },
                              e
                            )
                          ),
                          (0, a.jsx)(m.B, {
                            onClick: () => c([]),
                            className: r.length > 0 ? o().selected : "",
                          }),
                        ],
                      }),
                    ],
                  });
                case "Expiry":
                case "Expiry Date":
                  return (0, a.jsxs)(a.Fragment, {
                    children: [
                      e,
                      (0, a.jsx)(h.Z, {
                        isOpen: E === f.P.SHOW_EXPIRY_FILTER && !M,
                        align: "start",
                        side: "top",
                        children: (0, a.jsx)("div", {
                          children: (0, a.jsx)(m.r, {
                            onClick: A(e),
                            fill: w.length > 0,
                          }),
                        }),
                      }),
                      (0, a.jsxs)("div", {
                        className: "".concat(o().filterDropdown, " ").concat(n),
                        ref: I,
                        children: [
                          P.map((e) =>
                            (0, a.jsx)(
                              x.T,
                              {
                                className: "mb-5",
                                labelClassName: "fs-xs-semibold",
                                value: e,
                                checked: w.includes(e.toUpperCase()),
                                label: e,
                                onChange: R,
                              },
                              e
                            )
                          ),
                          (0, a.jsx)(m.B, {
                            onClick: () => v([]),
                            className: w.length > 0 ? o().selected : "",
                          }),
                        ],
                      }),
                    ],
                  });
                case "Strike":
                  return (0, a.jsxs)(a.Fragment, {
                    children: [
                      e,
                      (0, a.jsx)(m.r, { onClick: A(e), fill: j.length > 0 }),
                      (0, a.jsxs)("div", {
                        className: "".concat(o().filterDropdown, " ").concat(n),
                        ref: D,
                        children: [
                          N.sort().map((e) =>
                            e
                              ? (0, a.jsx)(
                                  x.T,
                                  {
                                    className: "mb-5",
                                    labelClassName: "fs-xs-semibold",
                                    value: "".concat(e),
                                    checked: j.includes(
                                      "".concat(e).toUpperCase()
                                    ),
                                    label: "".concat(e),
                                    onChange: R,
                                  },
                                  "".concat(e)
                                )
                              : (0, a.jsx)(a.Fragment, {})
                          ),
                          (0, a.jsx)(m.B, {
                            onClick: () => g([]),
                            className: j.length > 0 ? o().selected : "",
                          }),
                        ],
                      }),
                    ],
                  });
                default:
                  return (0, a.jsxs)(a.Fragment, {
                    children: [
                      e,
                      (0, a.jsx)(l.Z, {
                        title: "Click to sort column",
                        className: o().sort,
                        onClick: () => {
                          t(e, !0);
                        },
                        children: (0, a.jsx)(i.Z, {}),
                      }),
                    ],
                  });
              }
            };
          return (0, a.jsxs)(a.Fragment, {
            children: [
              Z.map((e) =>
                (0, a.jsx)(
                  "div",
                  {
                    className: o().cell,
                    style: { ...e.style },
                    children: T(e.name),
                  },
                  e.name
                )
              ),
              (0, a.jsx)(u.Z, {}),
            ],
          });
        };
      },
      99205: function (e, t, r) {
        "use strict";
        r.r(t),
          r.d(t, {
            default: function () {
              return eF;
            },
          });
        var a = r(85893),
          n = r(67294),
          i = r(93967),
          l = r.n(i),
          s = r(59731),
          c = r(67253),
          o = r(15741),
          d = r(46656),
          u = r(37422),
          m = r(46449),
          x = r(69280),
          h = r(47236),
          p = r(84573),
          f = r(39332),
          w = r(73935),
          y = r(55638),
          v = r(90639),
          g = r(45338),
          j = r(67930),
          b = r(72696),
          C = r(4359),
          N = r(92400),
          P = (e) => {
            let {
                expiryFilter: t,
                allAvailableFilteredData: r,
                openInfographicModal: i,
                showPNLBanner: l,
                toggleShowPNLBanner: c,
                allowShowPNLBanner: o,
              } = e,
              m = (0, f.useParams)(),
              { showErrorToast: x } = (0, h.Z)(),
              { isAuthenticated: P } = (0, s.qr)(),
              [S, k] = (0, n.useState)([]),
              Z = null == m ? void 0 : m.agentId,
              F = () => k([]);
            return Z || P
              ? (0, a.jsx)(a.Fragment, {
                  children:
                    document.querySelector("#tabsPortal") &&
                    (0, w.createPortal)(
                      (0, a.jsxs)(a.Fragment, {
                        children: [
                          (0, a.jsxs)("div", {
                            className:
                              "tw-relative !tw-z-[9999] tw-flex tw-flex-wrap tw-items-center tw-gap-2 tw-text-xs sm:-tw-mt-2 sm:tw-gap-4",
                            children: [
                              (0, a.jsx)(b.Z, {
                                size: "sm",
                                rightLabel: "Select PNL",
                                onChange: c,
                                rightLabelClass: "tw-hidden sm:tw-inline",
                              }),
                              (0, a.jsxs)(u.Z, {
                                className: "tw-max-w-fit",
                                size: "sm",
                                disabled: !o,
                                title: "Show Payoff at Expiry",
                                onClick: () => (null == i ? void 0 : i()),
                                children: [
                                  (0, a.jsx)("span", { children: "Share PNL" }),
                                  (0, a.jsx)(p.Z, { className: "!tw-size-4" }),
                                ],
                              }),
                              (0, a.jsx)(N.Z, {
                                isOpen: !1,
                                align: "start",
                                side: "top",
                                children: (0, a.jsx)(u.Z, {
                                  size: "sm",
                                  title: "Click to Show Payoff at Expiry",
                                  disabled: 0 === t.length,
                                  onClick: () => {
                                    let e = r
                                      .map((e) => {
                                        let t = (0, g.Yr)(e.quantity, j.Gw, !0);
                                        return "-" !== t && t
                                          ? {
                                              type: e.product,
                                              side:
                                                e.quantity < 0
                                                  ? y.V.SELL
                                                  : y.V.BUY,
                                              size: Number(t),
                                              strike: e.strike,
                                              averageExecutionPrice:
                                                e.averagePrice,
                                              expiry: e.tenor,
                                            }
                                          : null;
                                      })
                                      .filter(Boolean);
                                    0 === e.length
                                      ? x({
                                          title: "Wrong legs",
                                          message: "Legs quantity is 0",
                                        })
                                      : k(e);
                                  },
                                  className: "tw-max-w-fit",
                                  children: "Show Payoff",
                                }),
                              }),
                            ],
                          }),
                          (0, a.jsx)(d.default, {
                            isOpen: !!S.length,
                            title: (0, a.jsxs)("h4", {
                              children: [
                                "Position Summary",
                                " ",
                                S.length &&
                                  (0, a.jsx)("span", {
                                    className:
                                      "tw-ml-2 tw-text-xs tw-text-ithaca-white-60",
                                    children: null == S ? void 0 : S[0].expiry,
                                  }),
                              ],
                            }),
                            onCloseModal: F,
                            children: (0, a.jsxs)("div", {
                              className: "tw-flex tw-flex-col tw-gap-5",
                              children: [
                                S.length &&
                                  (0, a.jsx)(C.Z, {
                                    showProfitLoss: !0,
                                    tableType: v.vj.HISTORY,
                                    data: S,
                                  }),
                                (0, a.jsx)(u.Z, {
                                  title: "close",
                                  className: "mt-10",
                                  onClick: F,
                                  children: "Close",
                                }),
                              ],
                            }),
                          }),
                        ],
                      }),
                      document.querySelector("#tabsPortal")
                    ),
                })
              : null;
          },
          S = r(77768),
          k = r.n(S),
          Z = r(7110),
          F = r(64088),
          L = r(45323),
          _ = r(77125),
          D = r(59085),
          I = r(25811),
          E = r(69824),
          M = r(24620),
          A = r(14227),
          R = r(59421);
        let T = ["25", "50", "100"];
        var U = (e) => {
            let { closePositionRow: t, closeModal: r } = e,
              { underlyingCurrency: i } = (0, s.qr)(),
              [l, c] = (0, n.useState)("100"),
              [o, m] = (0, n.useState)(""),
              [x, p] = (0, n.useState)(),
              [f, w] = (0, n.useState)(),
              { showOrderErrorToast: v } = (0, h.Z)(),
              { showOrderConfirmationToastAndRefetchData: b } = (0, R.F)(),
              {
                ithacaSDK: C,
                spotContract: N,
                getContractsByPayoff: P,
                currencyPrecision: S,
              } = (0, s.qr)(),
              k = "Forward" === t.product,
              { unitPrice: Z, isLoading: U } = (0, D.k)({
                isForward: k,
                optionType: t.product,
                expiryDate: t.expiry,
                strike: k ? "-" : "".concat(t.strike),
                side: t.quantity < 0 ? y.V.SELL : y.V.BUY,
                currency: i,
              }),
              q = (0, n.useMemo)(() => {
                let e = isNaN(Number(l)),
                  t = 1 > Number(l),
                  r = Number(l) > 100;
                return e || t || r;
              }, [l]);
            (0, n.useEffect)(() => {
              m(Z);
            }, [Z]);
            let O = async () => {
              if (!t || !l || !Z) return;
              let e = P(t.product),
                r = Math.abs(t.quantity) * ((0, g.Dx)(l) / 100),
                a = [
                  {
                    contractId:
                      "Forward" === t.product ||
                      "NEXT_AUCTION" === t.product ||
                      "Next Auction Forward" === t.product
                        ? N.contractId
                        : e[t.strike].contractId,
                    quantity: (0, g.Yr)(r, j.Gw, !0),
                    side: t.quantity < 0 ? y.V.BUY : y.V.SELL,
                  },
                ],
                n = (0, F.calculateNetPrice)(a, [Number(o)], S.strike),
                i = {
                  clientOrderId: (0, F.createClientOrderId)(),
                  totalNetPrice: n,
                  legs: a,
                };
              try {
                let [e, t] = await Promise.all([
                  C.calculation.estimateOrderLockPositioned(i),
                  C.calculation.estimateOrderFeesExtended(i),
                ]);
                p({
                  order: i,
                  orderLock: e,
                  orderFees: t.estimation,
                  orderFeesLocked: t.toBeLocked,
                }),
                  w({ order: i, type: "Position Builder" });
              } catch (e) {
                p({
                  order: i,
                  orderLock: null,
                  orderFees: null,
                  orderFeesLocked: null,
                }),
                  console.error(
                    "Order estimation for position builder failed",
                    e
                  );
              }
            };
            (0, n.useEffect)(() => {
              O();
            }, [t, l, o]);
            let B = (0, n.useMemo)(
                () =>
                  x && t && o
                    ? [
                        {
                          leg: null == x ? void 0 : x.order.legs[0],
                          referencePrice: Number(o),
                          payoff: null == t ? void 0 : t.product,
                          strike: "".concat(null == t ? void 0 : t.strike),
                        },
                      ]
                    : [],
                [x, t, o]
              ),
              z = () => {
                f && !q && V(f.order, f.type);
              },
              V = async (e, t) => {
                try {
                  await C.orders.newOrder(e, t), b();
                } catch (e) {
                  v(null == e ? void 0 : e.message);
                } finally {
                  w(void 0), r();
                }
              };
            return (0, a.jsx)(a.Fragment, {
              children: (0, a.jsx)(d.default, {
                title: "Order Summary",
                isOpen: !!t,
                onCloseModal: r,
                children: (0, a.jsxs)("div", {
                  className: " tw-flex tw-flex-col tw-gap-2",
                  children: [
                    (0, a.jsxs)("div", {
                      className: "tw-flex tw-items-center tw-justify-between",
                      children: [
                        (0, a.jsx)("p", {
                          className: "tw-font-semibold",
                          children: "Close Order",
                        }),
                        (0, a.jsxs)("div", {
                          className: "tw-flex tw-items-center tw-gap-1",
                          children: [
                            T.map((e) =>
                              (0, a.jsxs)(
                                u.Z,
                                {
                                  onClick: () => c(e),
                                  className: "!tw-h-[24px] !tw-w-[60px]",
                                  title: "Click to select ".concat(e, "%"),
                                  variant: l === e ? "primary" : "outline",
                                  children: [e, "%"],
                                },
                                e
                              )
                            ),
                            (0, a.jsx)(L.Z, {
                              min: 1,
                              max: 100,
                              type: "number",
                              value: l,
                              onChange: (e) => c((0, g.Dg)(e.target.value)),
                              icon: (0, a.jsx)("div", { children: "%" }),
                            }),
                          ],
                        }),
                      ],
                    }),
                    (0, a.jsxs)("div", {
                      className: "tw-flex tw-items-center tw-justify-between",
                      children: [
                        (0, a.jsx)("p", {
                          className: "tw-font-semibold",
                          children: "Unit Price",
                        }),
                        (0, a.jsx)("div", {
                          className: "tw-flex tw-items-center tw-gap-1",
                          children: (0, a.jsx)(L.Z, {
                            isLoading: U,
                            type: "number",
                            width: 200,
                            value: o,
                            icon: (0, a.jsx)(_.Z, {}),
                            onChange: (e) => {
                              let { target: t } = e;
                              m((0, g.Dg)(t.value));
                            },
                          }),
                        }),
                      ],
                    }),
                    B.length
                      ? (0, a.jsxs)("div", {
                          className: "tw-mt-8",
                          children: [
                            (0, a.jsx)("p", {
                              className: "tw-mb-4 tw-font-semibold",
                              children: "Strategy",
                            }),
                            (0, a.jsx)(M.Z, {
                              tableClassName: "!tw-min-h-fit",
                              strategies: B,
                              hideClear: !0,
                            }),
                          ],
                        })
                      : (0, a.jsx)(a.Fragment, {}),
                    (0, a.jsx)("p", {
                      className: "tw-y-4 tw-font-lato",
                      children: "Please Confirm: Submit to Auction",
                    }),
                    (0, a.jsx)("div", {
                      className: "tw-mb-4 tw-h-[1px] tw-bg-rgba-white-10",
                    }),
                    (0, a.jsx)(A.Z, { auctionSubmission: f, orderSummary: x }),
                    (0, a.jsx)(E.Z, {
                      children: (e) => {
                        let {
                          connected: t,
                          openConnectModal: r,
                          openAccountModal: n,
                        } = e;
                        return (0, a.jsx)(I.Z, {
                          isSubmitButtonDisabled: q,
                          onlyProtiftableOrders: !1,
                          submitAuction: z,
                          openConnectModal: r,
                          openAccountModal: n,
                          connected: t,
                          orderSummary: x,
                        });
                      },
                    }),
                  ],
                }),
              }),
            });
          },
          q = r(85056),
          O = r(18572),
          B = r(62582),
          z = r(87214),
          V = r(66610),
          W = r(18666),
          Y = r(20847),
          G = r(47825),
          H = r(75922),
          Q = r(36281),
          X = r(92592),
          K = r(98376),
          $ = r(14483),
          J = r(55787),
          ee = r(78517),
          et = { src: "/_next/static/media/bull.15279c32.png" },
          er = { src: "/_next/static/media/bear.a20184e8.png" },
          ea = { src: "/_next/static/media/texture.53c58d30.png" },
          en = { src: "/_next/static/media/ithaca-logo.a4be43a4.png" },
          ei = { src: "/_next/static/media/testnet.1d2f32b9.png" },
          el = r(72045),
          es = (e) => {
            let {
              bullishOrBearishImg: t,
              pnlColor: r,
              positions: n,
              pnl: i,
              pnlPercent: l,
              qrCode: s,
              refCode: c,
              modelPrice: o,
              unitPrice: d,
              IthacaLogo: u,
              backgroundImage: m,
              testnetWaterMark: x,
            } = e;
            return (0, a.jsxs)("div", {
              style: {
                display: "flex",
                flexDirection: "column",
                justifyContent: "space-between",
                padding: "32px 64px 24px 64px",
                alignItems: "center",
                fontFamily: "Roboto, Arial, sans-serif",
                fontWeight: 400,
                backgroundColor: "black",
                color: "white",
                width: "100%",
                height: "100%",
                overflow: "hidden",
                backgroundImage: "url(".concat(m, ")"),
                backgroundSize: "cover",
                backgroundRepeat: "no-repeat",
                backgroundPosition: "center",
                position: "relative",
              },
              children: [
                (0, a.jsx)("img", {
                  src: t,
                  alt: "Bullish or Bearish PNL",
                  style: {
                    objectFit: "contain",
                    position: "absolute",
                    bottom: 0,
                    right: 0,
                    height: "75%",
                  },
                }),
                (0, a.jsxs)("div", {
                  style: {
                    display: "flex",
                    alignItems: "flex-start",
                    width: "100%",
                  },
                  children: [
                    (0, a.jsxs)("div", {
                      style: {
                        height: "100%",
                        display: "flex",
                        flexGrow: "40",
                        flexDirection: "column",
                        justifyContent: "space-between",
                      },
                      children: [
                        (0, a.jsx)("img", {
                          src: u,
                          alt: "Ithaca logo",
                          style: { objectFit: "contain", width: 244 },
                        }),
                        (0, a.jsxs)("div", {
                          style: {
                            fontSize: 100,
                            display: "flex",
                            color: r,
                            marginBottom: 10,
                            letterSpacing: -6,
                          },
                          children: [l, "%"],
                        }),
                        (0, a.jsxs)("div", {
                          style: {
                            display: "flex",
                            flexDirection: "column",
                            fontSize: 30,
                            gap: 4,
                          },
                          children: [
                            (0, a.jsxs)("div", {
                              style: { display: "flex" },
                              children: ["Model Price: ", o, "$"],
                            }),
                            (0, a.jsxs)("div", {
                              style: { display: "flex" },
                              children: ["Average Entry Price: ", d, "$"],
                            }),
                            (0, a.jsxs)("div", {
                              style: { color: r, display: "flex" },
                              children: ["PNL: ", i, "$"],
                            }),
                          ],
                        }),
                      ],
                    }),
                    (0, a.jsxs)("div", {
                      style: {
                        display: "flex",
                        flexDirection: "column",
                        flexGrow: "60",
                        fontSize: 22,
                        gap: 8,
                        justifyContent: "flex-end",
                        alignItems: "flex-end",
                        position: "absolute",
                        top: 16,
                        right: 16,
                      },
                      children: [
                        (0, a.jsxs)("div", {
                          style: {
                            display: "flex",
                            color: "#9D9DAA",
                            alignItems: "center",
                          },
                          children: [
                            (0, a.jsx)("div", {
                              style: { display: "flex", width: 100 },
                              children: "Product",
                            }),
                            (0, a.jsx)("div", {
                              style: { display: "flex", width: 90 },
                              children: "Expiry",
                            }),
                            (0, a.jsx)("div", {
                              style: { display: "flex", width: 80 },
                              children: "Strike",
                            }),
                            (0, a.jsx)("div", {
                              style: {
                                display: "flex",
                                width: 48,
                                justifyContent: "flex-end",
                              },
                              children: "Qty",
                            }),
                            (0, a.jsx)("div", {
                              style: {
                                display: "flex",
                                width: 125,
                                justifyContent: "flex-end",
                              },
                              children: "Entry Price",
                            }),
                            (0, a.jsx)("div", {
                              style: {
                                display: "flex",
                                width: 125,
                                justifyContent: "flex-end",
                              },
                              children: "Model Price",
                            }),
                            (0, a.jsx)("div", {
                              style: {
                                display: "flex",
                                width: 80,
                                justifyContent: "flex-end",
                              },
                              children: "PNL",
                            }),
                          ],
                        }),
                        n.map((e, t) => {
                          let r = Number(e.pnl) > 0 ? "#68F4A0" : "#FF3F57";
                          return (0, a.jsxs)(
                            "div",
                            {
                              style: {
                                display: "flex",
                                alignItems: "center",
                                fontWeight: 600,
                              },
                              children: [
                                (0, a.jsx)("div", {
                                  style: { display: "flex", width: 100 },
                                  children: e.product,
                                }),
                                (0, a.jsx)("div", {
                                  style: { display: "flex", width: 90 },
                                  children: e.expiry,
                                }),
                                (0, a.jsx)("div", {
                                  style: { display: "flex", width: 80 },
                                  children: e.strike,
                                }),
                                (0, a.jsx)("div", {
                                  style: {
                                    display: "flex",
                                    width: 48,
                                    justifyContent: "flex-end",
                                  },
                                  children: e.quantity.toFixed(2),
                                }),
                                (0, a.jsx)("div", {
                                  style: {
                                    display: "flex",
                                    width: 125,
                                    justifyContent: "flex-end",
                                  },
                                  children: e.entryPrice.toFixed(2),
                                }),
                                (0, a.jsx)("div", {
                                  style: {
                                    display: "flex",
                                    width: 125,
                                    justifyContent: "flex-end",
                                  },
                                  children: e.modelPrice.toFixed(2),
                                }),
                                (0, a.jsx)("div", {
                                  style: {
                                    display: "flex",
                                    width: "80px",
                                    justifyContent: "flex-end",
                                    color: r,
                                  },
                                  children: e.pnl.toFixed(2),
                                }),
                              ],
                            },
                            t
                          );
                        }),
                      ],
                    }),
                  ],
                }),
                (0, a.jsxs)("div", {
                  style: {
                    width: "100%",
                    display: "flex",
                    position: "relative",
                    alignItems: "center",
                    gap: 28,
                  },
                  children: [
                    (0, a.jsx)("img", {
                      src: s,
                      alt: "QR Code",
                      style: { width: 122, height: 122, flexShrink: 0 },
                    }),
                    (0, a.jsxs)("div", {
                      style: { display: "flex", flexDirection: "column" },
                      children: [
                        (0, a.jsx)("div", {
                          style: { fontSize: 40 },
                          children: "Referral Code",
                        }),
                        (0, a.jsx)("div", {
                          style: { fontSize: 60, fontWeight: 800 },
                          children: c,
                        }),
                        (0, a.jsx)("div", {
                          style: { fontSize: 30 },
                          children: j.FX,
                        }),
                      ],
                    }),
                  ],
                }),
                x &&
                  (0, a.jsx)("img", {
                    src: x,
                    alt: "Testnet watermark",
                    style: {
                      top: 64,
                      left: 160,
                      width: 860,
                      height: "90%",
                      objectFit: "contain",
                      position: "absolute",
                    },
                  }),
              ],
            });
          },
          ec = r(82834);
        let eo = (e) => (e ? (0, g.Yr)(e, j.Gw) : "0.00"),
          ed = async (e) => (await fetch(e)).arrayBuffer(),
          eu = (e) => "".concat(j.FX, "/points/referral?referral=").concat(e),
          em = (e, t) => ((t - e) / e) * 100,
          ex = async () => {
            let [e, t, r] = await Promise.all([
              ed("/fonts/Roboto-Black.ttf"),
              ed("/fonts/Roboto-Medium.ttf"),
              ed("/fonts/Roboto-Regular.ttf"),
            ]);
            return {
              width: 1200,
              height: 630,
              fonts: [
                { name: "Roboto", data: r, style: "normal", weight: 400 },
                { name: "Roboto", data: t, style: "normal", weight: 600 },
                { name: "Roboto", data: e, style: "normal", weight: 800 },
              ],
            };
          },
          eh = async (e) => {
            let {
              modelPrice: t,
              pnl: r,
              pnlPercentage: n,
              referralCode: i,
              referralLink: l,
              entryPrice: s,
              positions: c,
            } = e;
            if (i)
              try {
                let e = r > 0,
                  o = ec.BB ? void 0 : ei.src,
                  d = await (0, X.toDataURL)(l),
                  u = await ex(),
                  m = await (0, Q.Z)(
                    (0, a.jsx)(es, {
                      pnl: eo(r),
                      pnlColor: e ? "#68F4A0" : "#FF3F57",
                      qrCode: d,
                      positions: c,
                      refCode: i,
                      IthacaLogo: en.src,
                      pnlPercent: eo(n),
                      modelPrice: t.toFixed(2),
                      unitPrice: s.toFixed(2),
                      backgroundImage: ea.src,
                      bullishOrBearishImg: (e ? et : er).src,
                      testnetWaterMark: o,
                    }),
                    u
                  );
                return "data:image/svg+xml;base64,".concat(btoa(m));
              } catch (e) {
                console.error(e);
              }
          },
          ep = (e) =>
            e.map((e) => {
              var t, r, a;
              return {
                product: e.product,
                expiry: e.tenor,
                strike: e.strike,
                quantity: e.quantity,
                entryPrice: e.averagePrice,
                modelPrice:
                  null !== (t = null == e ? void 0 : e.modelPrice) &&
                  void 0 !== t
                    ? t
                    : 0,
                pnl:
                  null !== (r = null == e ? void 0 : e.profitAndLoss) &&
                  void 0 !== r
                    ? r
                    : 0,
                entryPriceQtyProduct: e.quantity * e.averagePrice,
                modelPriceQtyProduct:
                  (null !== (a = null == e ? void 0 : e.modelPrice) &&
                  void 0 !== a
                    ? a
                    : 0) * e.quantity,
              };
            }),
          ef = (e) =>
            e.reduce(
              (e, t) => ({
                pnl: e.pnl + t.pnl,
                entryPrice: e.entryPrice + t.entryPrice,
                modelPrice: e.modelPrice + t.modelPrice,
                entryPriceQtyProduct:
                  e.entryPriceQtyProduct + t.entryPriceQtyProduct,
                modelPriceQtyProduct:
                  e.modelPriceQtyProduct + t.modelPriceQtyProduct,
              }),
              {
                modelPrice: 0,
                pnl: 0,
                entryPrice: 0,
                entryPriceQtyProduct: 0,
                modelPriceQtyProduct: 0,
              }
            ),
          ew = (e) => {
            let t = document.createElement("canvas"),
              r = new Image();
            (r.onload = () => {
              (t.width = r.width), (t.height = r.height);
              let e = t.getContext("2d");
              null == e || e.drawImage(r, 0, 0);
              let a = t.toDataURL("image/png"),
                n = document.createElement("a");
              (n.href = a),
                (n.download = "positions-infographic-".concat(
                  (0, el.Z)(),
                  ".png"
                )),
                document.body.appendChild(n),
                n.click(),
                document.body.removeChild(n);
            }),
              (r.src = e);
          },
          ey = (e, t, r) => {
            switch (e) {
              case "Discord":
                return {
                  name: e,
                  link: "https://discord.com/channels/@me?content="
                    .concat(encodeURIComponent(r), " ")
                    .concat(encodeURIComponent(t)),
                  icon: (0, a.jsx)(J.Z, {}),
                };
              case "Farcaster":
                return {
                  name: e,
                  link: "https://farcaster.xyz/?text="
                    .concat(encodeURIComponent(r), "&url=")
                    .concat(encodeURIComponent(t)),
                  icon: (0, a.jsx)(ee.Z, {}),
                };
              case "Telegram":
                return {
                  name: e,
                  link: "https://telegram.me/share/url?url="
                    .concat(encodeURIComponent(t), "&text=")
                    .concat(encodeURIComponent(r)),
                  icon: (0, a.jsx)($.Z, {}),
                };
              case "X":
                return {
                  name: e,
                  link: "https://x.com/intent/tweet?text="
                    .concat(encodeURIComponent(r), "&url=")
                    .concat(encodeURIComponent(t)),
                  icon: (0, a.jsx)(K.Z, {}),
                };
            }
          };
        var ev = r(60857),
          eg = r(10957),
          ej = r(65440),
          eb = r(29711),
          eC = r(88144),
          eN = (e) => {
            let {
                closeInfographicModal: t,
                infographicsData: r,
                referralCode: n,
                referralLink: i,
              } = e,
              { showToast: l } = (0, h.Z)(),
              s = ep(r),
              c = ef(s),
              {
                data: o,
                isLoading: d,
                isError: m,
                isSuccess: x,
              } = (0, eC.a)({
                queryKey: ["infographic", s, c, i, n],
                refetchOnMount: "always",
                queryFn: () =>
                  eh({
                    positions: s,
                    referralLink: i,
                    referralCode: n,
                    entryPrice: c.entryPrice,
                    modelPrice: c.modelPrice,
                    pnl: c.pnl,
                    pnlPercentage: em(
                      c.entryPriceQtyProduct,
                      c.modelPriceQtyProduct
                    ),
                  }),
              });
            return (0, a.jsx)(a.Fragment, {
              children: w.createPortal(
                (0, a.jsxs)("div", {
                  className:
                    "tw-fixed tw-inset-0 tw-z-50 tw-flex tw-flex-col tw-items-center tw-justify-center tw-gap-4 tw-bg-black/60 tw-p-6 tw-backdrop-blur-sm",
                  onClick: t,
                  children: [
                    (0, a.jsxs)("div", {
                      className:
                        "tw-relative tw-flex tw-aspect-video tw-w-full tw-max-w-screen-sm tw-items-center tw-justify-center",
                      children: [
                        (0, a.jsx)("button", {
                          title: "Close infographic modal",
                          className:
                            "tw-absolute -tw-right-4 -tw-top-10 tw-size-8 tw-text-white",
                          onClick: t,
                          children: (0, a.jsx)(eb.Z, {}),
                        }),
                        o &&
                          (0, a.jsx)("img", {
                            onClick: (e) => e.stopPropagation(),
                            alt: "Infographic",
                            src: o,
                            className:
                              "tw-absolute tw-h-full tw-w-full tw-object-contain",
                          }),
                        d && (0, a.jsx)(ej.Z, { type: "lg" }),
                        m &&
                          (0, a.jsx)("div", {
                            className:
                              "tw-absolute tw-flex tw-h-full tw-w-full tw-items-center tw-justify-center tw-text-center tw-text-lg tw-text-white",
                            children: "An error occurred while loading image",
                          }),
                      ],
                    }),
                    x &&
                      (0, a.jsxs)("div", {
                        className:
                          "tw-flex tw-flex-wrap tw-items-center tw-justify-center tw-gap-4",
                        children: [
                          (0, a.jsx)("button", {
                            className:
                              "tw-flex tw-size-12 tw-items-center tw-justify-center tw-rounded-full tw-bg-black-dark/80 tw-text-lg",
                            title: "Copy referral link",
                            onClick: (e) => {
                              e.stopPropagation(),
                                navigator.clipboard.writeText(i),
                                l({
                                  title: "Copied",
                                  message: i,
                                  type: "success",
                                });
                            },
                            children: (0, a.jsx)(eg.Z, {}),
                          }),
                          j.CL.map((e) => {
                            let t = ey(e, i, "");
                            return (0, a.jsx)(
                              "button",
                              {
                                className:
                                  "tw-flex tw-size-12 tw-items-center tw-justify-center tw-rounded-full tw-bg-black-dark/80 tw-text-lg",
                                title: "Share on ".concat(
                                  null == t ? void 0 : t.name
                                ),
                                onClick: (e) => {
                                  e.stopPropagation(),
                                    window.open(
                                      null == t ? void 0 : t.link,
                                      "_blank"
                                    );
                                },
                                children: null == t ? void 0 : t.icon,
                              },
                              null == t ? void 0 : t.name
                            );
                          }),
                          (0, a.jsx)(u.Z, {
                            title: "Download infographic",
                            className: "tw-w-max",
                            onClick: (e) => {
                              e.stopPropagation(), o && ew(o);
                            },
                            children: (0, a.jsx)(ev.Z, {}),
                          }),
                        ],
                      }),
                  ],
                }),
                document.body
              ),
            });
          },
          eP = (e) => {
            let {
                closeInfographicModal: t,
                infographicsData: r,
                referralCode: n = "",
                showModal: i,
              } = e,
              l = eu(n);
            return i
              ? (0, a.jsx)(
                  eN,
                  {
                    infographicsData: r,
                    closeInfographicModal: t,
                    referralCode: n,
                    referralLink: l,
                  },
                  "".concat(i)
                )
              : null;
          },
          eS = r(36703),
          ek = r(12349),
          eZ = r(32010),
          eF = (e) => {
            let { isPreview: t = !1, agentId: r } = e,
              i = t ? m.KP : void 0,
              {
                currentPage: h,
                handlePageChange: p,
                pageStart: f,
                pageEnd: w,
              } = (0, m.ZP)(i),
              [y, b, N, S, F, L, _, D] = (0, s.qr)(
                (0, eZ.N)((e) => [
                  e.newToast,
                  e.isAuthenticated,
                  e.unFilteredContractList,
                  e.currentExpiryDate,
                  e.setCurrentExpiryDate,
                  e.expiryList,
                  e.ithacaSDK,
                  e.underlyingCurrency,
                ])
              ),
              { updateStep: I, isTutorialDisabled: E } = (0, n.useContext)(
                o.OnboardingContext
              ),
              M = t ? v.vj.PREVIEW_ORDER : v.vj.ORDER,
              [A, R] = (0, n.useState)(null),
              [T, Q] = (0, n.useState)(void 0),
              [X, K] = (0, n.useState)([]),
              [$, J] = (0, n.useState)([]),
              [ee, et] = (0, n.useState)(0),
              [er, ea] = (0, n.useState)([]),
              [en, ei] = (0, n.useState)(!1),
              [el, es] = (0, n.useState)(!1),
              [ec, eo] = (0, n.useState)([]),
              ed = (0, n.useMemo)(
                () => (el ? ec.sort((e, t) => e - t).map((e) => X[e]) : []),
                [ec, X, el]
              ),
              {
                setPositionsFilter: eu,
                positions: {
                  strikeFilter: em,
                  expiryFilter: ex,
                  productFilter: eh,
                },
              } = (0, s.xc)(),
              ep = eu("strikeFilter"),
              ef = eu("expiryFilter"),
              ew = eu("productFilter"),
              [ey, ev] = (0, n.useState)(null),
              [eg, ej] = (0, n.useState)(!0),
              [eb, eN] = (0, n.useState)(0),
              [eF, eL] = (0, n.useState)(0),
              [e_, eD] = (0, n.useState)(0),
              [eI, eE] = (0, n.useState)(0),
              [eM, eA] = (0, n.useState)(0),
              [eR] = (0, n.useState)(S),
              { data: eT } = (0, eC.a)({
                queryKey: ["referralCode"],
                queryFn: () => (0, eS.Vd)(),
                select: (e) => {
                  var t;
                  return null === (t = e.data) || void 0 === t
                    ? void 0
                    : t.user.referralCode;
                },
              }),
              eU = !!r || b,
              {
                data: eq = [],
                isPending: eO,
                refetch: eB,
              } = (0, ek.$)({
                isConnectedAndAuthenticated: eU,
                unFilteredContractList: N,
                agentId: r,
                ithacaSDK: _,
                underlyingCurrency: D,
              });
            (0, n.useEffect)(() => {
              y &&
                ("NEW" === y.orderStatus || "FILLED" === y.orderStatus) &&
                eB();
            }, [y, eB]);
            let ez = (0, n.useMemo)(
                () =>
                  Array.from(new Set(eq.flatMap((e) => "".concat(e.strike))))
                    .sort()
                    .map((e) => "".concat(e)),
                [eq]
              ),
              eV = (0, n.useMemo)(
                () =>
                  Array.from(new Set(eq.map((e) => e.expiry)))
                    .sort()
                    .map((e) => (0, W.lV)("".concat(e))),
                [eq]
              ),
              eW = (0, n.useMemo)(
                () =>
                  Array.from(new Set(eq.map((e) => (0, B.Yf)(e.product))))
                    .sort()
                    .map((e) => e),
                [eq]
              );
            (0, n.useEffect)(() => {
              0 !== eV.length &&
                (ex.every((e) =>
                  eV.map((e) => e.toUpperCase()).includes(e.toUpperCase())
                ) ||
                  ef([]));
            }, [eV]),
              (0, n.useEffect)(() => {
                0 !== ez.length &&
                  (em.every((e) => ez.map((e) => e).includes(e)) || ep([]));
              }, [ez, em]),
              (0, n.useEffect)(() => {
                let e = Array.from(eV);
                1 === e.length && ef([e[0].toUpperCase()]);
              }, [eV]);
            let eY = (e) => {
                er.includes(e)
                  ? ea((t) => t.filter((t) => t !== e))
                  : ea((t) => [...t, e]);
              },
              eG = () => {
                let e = (0, V.ht)(eq, eh);
                e = t
                  ? (0, V.Di)(e, [(0, W.lV)(S.toString()).toUpperCase()])
                  : (0, V.Di)(e, ex);
                let r = (e = (0, V.Rz)(e, em));
                ey &&
                  [
                    "Quantity",
                    "Average Price",
                    " Delta",
                    " Theta",
                    " Gamma",
                    " Vega",
                  ].includes(ey) &&
                  (r = (0, B.rG)(
                    e,
                    {
                      Quantity: "quantity",
                      "Average Price": "averagePrice",
                      " Delta": "delta",
                      " Theta": "theta",
                      " Gamma": "gamma",
                      " Vega": "vega",
                    }[ey],
                    eg
                  )),
                  et(r.length),
                  J(r),
                  eN(
                    r.reduce((e, t) => {
                      var r;
                      return (
                        e +
                        (null !== (r = t.profitAndLoss) && void 0 !== r ? r : 0)
                      );
                    }, 0)
                  ),
                  eL(
                    r.reduce((e, t) => {
                      var r;
                      return (
                        e + (null !== (r = t.delta) && void 0 !== r ? r : 0)
                      );
                    }, 0)
                  ),
                  eD(
                    r.reduce((e, t) => {
                      var r;
                      return (
                        e + (null !== (r = t.vega) && void 0 !== r ? r : 0)
                      );
                    }, 0)
                  ),
                  eE(
                    r.reduce((e, t) => {
                      var r;
                      return (
                        e + (null !== (r = t.gamma) && void 0 !== r ? r : 0)
                      );
                    }, 0)
                  ),
                  eA(
                    r.reduce((e, t) => {
                      var r;
                      return (
                        e + (null !== (r = t.theta) && void 0 !== r ? r : 0)
                      );
                    }, 0)
                  ),
                  K(r.slice(f, w)),
                  r.length && !E && (null == I || I(c.P.SHOW_PAYOFF_AT_EXPIRY));
              };
            (0, n.useEffect)(() => {
              ea([]);
            }, [f, w]),
              (0, n.useEffect)(() => {
                eU && !eO && eG();
              }, [r, eU, E, eq, eO, eh, ex, em, ey, eg, S, f, w, i, en]);
            let eH = !X.length && eO && eU,
              eQ = !X.length && !eO,
              eX = X.length > 0,
              eK = () => {
                R(null), Q(void 0), F(eR);
              },
              e$ = async (e) => {
                Q(e), L.includes(e.expiry) && F(e.expiry);
              },
              eJ = () => ei((e) => !e),
              e0 = () => eo([]),
              e1 = (e) => {
                eo((t) => [...t, e]);
              },
              e2 = (e) => {
                eo((t) => t.filter((t) => t !== e));
              };
            return (0, a.jsxs)(a.Fragment, {
              children: [
                t &&
                  (0, a.jsx)("div", {
                    className: "tw-mb-8",
                    children: (0, a.jsx)(H.Z, {
                      size: "regular",
                      options: L.map((e) => ({
                        value: "".concat(e),
                        option: (0, W.lV)(e.toString()),
                      })),
                      name: "expiryDate",
                      selectedOption: "".concat(S),
                      onChange: (e) => {
                        F((0, g.Dx)(e));
                      },
                    }),
                  }),
                !t &&
                  (0, a.jsx)(P, {
                    expiryFilter: ex,
                    allAvailableFilteredData: $,
                    openInfographicModal: () => es(!0),
                    allowShowPNLBanner: ec.length > 0,
                    showPNLBanner: en,
                    toggleShowPNLBanner: () => {
                      e0(), eJ();
                    },
                  }),
                T && (0, a.jsx)(U, { closePositionRow: T, closeModal: eK }),
                (0, a.jsx)(d.default, {
                  isOpen: !!A,
                  title: "Position Summary",
                  onCloseModal: eK,
                  children: (0, a.jsxs)("div", {
                    className: "tw-flex tw-flex-col tw-gap-5",
                    children: [
                      A &&
                        (0, a.jsx)(C.Z, {
                          showProfitLoss: !0,
                          data: A,
                          tableType: M,
                        }),
                      (0, a.jsx)(u.Z, {
                        title: "close",
                        className: "mt-10",
                        onClick: eK,
                        children: "Close",
                      }),
                    ],
                  }),
                }),
                (0, a.jsx)(eP, {
                  closeInfographicModal: () => es(!1),
                  infographicsData: ed,
                  referralCode: eT,
                  showModal: el,
                }),
                (0, a.jsxs)("div", {
                  className: l()(
                    M === v.vj.ORDER
                      ? k().gridContainerTable
                      : k().gridPreviewPositionsContainerTable,
                    { [k().isOpacity]: !eU }
                  ),
                  children: [
                    (0, a.jsx)(x.Z, {
                      isExpirySingleChoice: !0,
                      expiryList: eV,
                      strikeList: ez,
                      productList: eW,
                      setProductFilter: ew,
                      productFilter: eh,
                      setExpiryFilter: ef,
                      expiryFilter: ex,
                      type: M,
                      setStrikeFilter: ep,
                      strikeFilter: em,
                      updateSort: (e, t) => {
                        ev(e), ej(ey != e || !eg);
                      },
                      clearBannerPositions: e0,
                    }),
                    eX &&
                      X.map((e, i) => {
                        let l = er.includes(i),
                          s = ec.includes(i);
                        return (0, a.jsxs)(
                          n.Fragment,
                          {
                            children: [
                              (0, a.jsx)(Z.Z, {
                                handleOpenPositionCloseModal: e$,
                                handleRowExpand: eY,
                                expandedRow: er,
                                row: e,
                                rowIndex: i,
                                isPreview: t,
                                isPositionInBanner: s,
                                addPositionToBanner: () => e1(i),
                                removePositionFromBanner: () => e2(i),
                                showPNLBanner: en,
                              }),
                              (0, a.jsx)(z.Z, {
                                isRowExpanded: l,
                                type: M,
                                children: (0, a.jsx)(q.Z, {
                                  contractId: e.contractId,
                                  isPreview: t,
                                  agentId: r,
                                }),
                              }),
                            ],
                          },
                          i
                        );
                      }),
                    (0, a.jsxs)(a.Fragment, {
                      children: [
                        (0, a.jsx)("div", {
                          className:
                            "tw-col-span-8 tw-mr-3 tw-flex tw-items-center tw-justify-end tw-gap-3",
                          children: eb
                            ? (0, a.jsxs)(a.Fragment, {
                                children: [
                                  (0, a.jsx)("p", {
                                    className: "tw-text-xs tw-text-white",
                                    children: "Selected Positions Total :",
                                  }),
                                  (0, a.jsx)(Y.Z, {
                                    plusMinusOnly: !0,
                                    labelClassName: "!tw-text-xs",
                                    className: "!tw-items-end",
                                    value: Number(eb.toFixed(j.Gw)),
                                    showAbsValue: !0,
                                  }),
                                ],
                              })
                            : (0, a.jsx)(a.Fragment, {}),
                        }),
                        (0, a.jsx)(G.Z, { value: eF, decimalPlaces: 3 }),
                        (0, a.jsx)(G.Z, { value: e_ }),
                        (0, a.jsx)(G.Z, { value: eI, decimalPlaces: 3 }),
                        (0, a.jsx)(G.Z, { value: eM }),
                        (0, a.jsx)("div", {}),
                      ],
                    }),
                    (0, a.jsx)("div", {
                      style: { minHeight: (0, B.OS)(X.length) },
                      className: "tw-col-span-full",
                      children: (0, a.jsx)(O.y, {
                        displayIsLoading: eH,
                        displayNoResults: eQ,
                        isAuthenticated: eU,
                        totalItems: ee,
                        currentPage: h,
                        handlePageChange: p,
                        pageLimit: i,
                      }),
                    }),
                  ],
                }),
              ],
            });
          };
      },
      7110: function (e, t, r) {
        "use strict";
        var a = r(85893),
          n = r(93967),
          i = r.n(n),
          l = r(37422),
          s = r(20847),
          c = r(57345),
          o = r(43529),
          d = r(45338),
          u = r(10066),
          m = r(43495),
          x = r(23870),
          h = r(67930),
          p = r(77768),
          f = r.n(p);
        t.Z = (e) => {
          let {
            row: t,
            rowIndex: r,
            handleRowExpand: n,
            expandedRow: p,
            handleOpenPositionCloseModal: w,
            isPreview: y,
            addPositionToBanner: v,
            removePositionFromBanner: g,
            isPositionInBanner: j,
            showPNLBanner: b,
            isAgentPositionRow: C,
          } = e;
          return (0, a.jsxs)(a.Fragment, {
            children: [
              (0, a.jsx)("div", {
                onKeyDown: () => n(r),
                onClick: () => n(r),
                className: f().cell,
                children: (0, a.jsx)(l.Z, {
                  title: "Click to expand dropdown",
                  className: ""
                    .concat(f().dropdown, " ")
                    .concat(p.includes(r) ? f().isActive : ""),
                  children: (0, a.jsx)(c.Z, {}),
                }),
              }),
              !y &&
                (0, a.jsx)("div", {
                  className: f().cellContent,
                  style: { padding: "8px 0px" },
                  children: t.tenor && (0, u.m2)(t.tenor),
                }),
              (0, a.jsx)("div", {
                className: f().cellContent,
                children: (0, a.jsx)("p", {
                  className: "tw-truncate",
                  children: t.product,
                }),
              }),
              (0, a.jsx)("div", {
                className: f().cellContent,
                children: t.strike || "-",
              }),
              (0, a.jsx)("div", {
                className: i()(f().cellContent, "tw-mr-3 tw-justify-end"),
                children: (0, d.Yr)(t.quantity, h.Gw),
              }),
              (0, a.jsx)("div", {
                className: i()(f().cellContent, "tw-mr-3 tw-justify-end"),
                children: (0, d.Yr)(t.averagePrice, h.Gw),
              }),
              (0, a.jsx)("div", {
                className: i()(
                  f().cellContent,
                  "tw-mr-3 tw-justify-end !tw-text-ithaca-white-60"
                ),
                children: t.modelPrice ? (0, d.Yr)(t.modelPrice, h.Gw) : "-",
              }),
              (0, a.jsxs)("div", {
                className: i()(f().cellContent, "tw-mr-3 tw-justify-end"),
                children: [
                  t.profitAndLoss
                    ? (0, a.jsx)("div", {
                        children: (0, a.jsx)(s.Z, {
                          plusMinusOnly: !0,
                          labelClassName: "!tw-text-xs",
                          className: "!tw-items-end",
                          value: Number(t.profitAndLoss.toFixed(h.Gw)),
                          showAbsValue: !0,
                        }),
                      })
                    : "-",
                  b &&
                    (0, a.jsx)(m.E.div, {
                      layout: !0,
                      children: (0, a.jsx)(o.T, {
                        label: "",
                        className: "-tw-ml-6 tw-w-4 tw-translate-x-8",
                        onChange: (e, t) => (t ? v() : g()),
                        checked: j,
                      }),
                    }),
                ],
              }),
              (0, a.jsx)("div", {
                className: i()(
                  f().cellContent,
                  "tw-mr-3 tw-justify-end !tw-text-sm !tw-text-ithaca-white-60"
                ),
                children: t.delta.toFixed(3),
              }),
              (0, a.jsx)("div", {
                className: i()(
                  f().cellContent,
                  "tw-mr-3 tw-justify-end !tw-text-sm !tw-text-ithaca-white-60"
                ),
                children: t.vega.toFixed(2),
              }),
              (0, a.jsx)("div", {
                className: i()(
                  f().cellContent,
                  "tw-mr-3 tw-justify-end !tw-text-sm !tw-text-ithaca-white-60"
                ),
                children: t.gamma.toFixed(3),
              }),
              (0, a.jsx)("div", {
                className: i()(
                  f().cellContent,
                  "tw-mr-3 tw-justify-end !tw-text-sm !tw-text-ithaca-white-60"
                ),
                children: t.theta.toFixed(3),
              }),
              !C &&
                (0, a.jsx)("div", {
                  className: i()(f().cellContent, "tw-justify-end"),
                  children: (0, a.jsx)(l.Z, {
                    className:
                      "tw-h-[21px] tw-w-[71px] tw-border-red-500 tw-text-red-500",
                    size: "sm",
                    variant: "outline",
                    title: "Show Payoff Diagram",
                    onClick: () => (null == w ? void 0 : w(t)),
                    children: "Close",
                  }),
                }),
              (0, a.jsx)(x.Z, {}),
            ],
          });
        };
      },
      47825: function (e, t, r) {
        "use strict";
        var a = r(85893),
          n = r(67930),
          i = r(45338);
        t.Z = (e) => {
          let { value: t, decimalPlaces: r = n.Gw } = e;
          return (0, a.jsx)("div", {
            className:
              "tw-mr-3 tw-flex tw-items-center tw-justify-end tw-gap-3 tw-text-sm tw-text-white",
            children: t ? (0, i.Yr)(t, r) : (0, a.jsx)(a.Fragment, {}),
          });
        };
      },
      66610: function (e, t, r) {
        "use strict";
        r.d(t, {
          Di: function () {
            return i;
          },
          Rz: function () {
            return l;
          },
          ht: function () {
            return n;
          },
        });
        var a = r(62582);
        let n = (e, t) =>
            0 == t.length
              ? e
              : e.filter((e) => t.includes((0, a.Yf)(e.product).toUpperCase())),
          i = (e, t) =>
            0 == t.length
              ? e
              : e.filter((e) => t.includes(e.tenor.toUpperCase())),
          l = (e, t) =>
            0 == t.length
              ? e
              : e.filter((e) => t.includes("".concat(e.strike).toUpperCase()));
      },
      12349: function (e, t, r) {
        "use strict";
        r.d(t, {
          $: function () {
            return u;
          },
          X: function () {
            return d;
          },
        });
        var a = r(18666),
          n = r(62582),
          i = r(59731),
          l = r(88144),
          s = r(67930),
          c = r(69881),
          o = r(51700);
        let d = (e, t) => {
            let r = (0, i.qr)((e) => e.ithacaSDK);
            return (0, l.a)({
              queryKey: [s.io, "details", e],
              queryFn: async () => {
                let a = t
                  ? await (0, o.uD)({
                      agentId: t,
                      resource: "positions_for_contract",
                      query: "contract_id=".concat(e),
                      method: "post",
                    })
                  : await r.client.currentPositionsForContract(
                      e,
                      "SHOW_ORDERS"
                    );
                return (0, n.i)(a);
              },
              refetchInterval: s.x6,
            });
          },
          u = (e) => {
            let {
                isConnectedAndAuthenticated: t,
                unFilteredContractList: r,
                agentId: d,
                ithacaSDK: u,
                underlyingCurrency: m,
              } = e,
              x = (0, i.qr)((e) => e.delegatedWalletAddress);
            return (0, l.a)({
              queryKey: [s.io, d, m, t, x],
              queryFn: async () => {
                let e = d
                    ? await (0, o.uD)({ resource: "positions", agentId: d })
                    : await u.client.currentPositions("NO_DETAILS"),
                  t = (0, n.Wc)(e, r);
                if (0 === t.length) return [];
                let i = t.map((e) => ({
                    contractId: e.contractId,
                    payoff: e.product,
                    expiry: (0, a.p6)(e.expiry.toString(), a.Nn, "YYYY-MM-DD"),
                    strike: e.strike || 0,
                  })),
                  l = await (0, c.Cu)({ contracts: i, currency: m });
                t = t.map((e) => {
                  let t = l.data.find((t) => t.contractId === e.contractId),
                    r = (null == t ? void 0 : t.price) || 0;
                  return {
                    ...e,
                    modelPrice: r,
                    profitAndLoss:
                      e.quantity * (Number(r) - Number(e.averagePrice)),
                  };
                });
                let s = await (0, c.QI)({
                  positionsWithContract: t.map((e) => ({
                    strike: e.strike || 0,
                    contractId: e.contractId,
                    expiry: (0, a.cK)("".concat(e.expiry), a.Nn).format(
                      "YYYY-MM-DD"
                    ),
                    payoff: e.product,
                    position: e.quantity,
                  })),
                });
                return t.map((e) => {
                  var t, r, a, n;
                  let i = s.find((t) => t.OptionID === e.contractId);
                  return {
                    ...e,
                    theta:
                      e.quantity *
                      (null !== (t = null == i ? void 0 : i.Theta) &&
                      void 0 !== t
                        ? t
                        : 0),
                    gamma:
                      e.quantity *
                      (null !== (r = null == i ? void 0 : i.Gamma) &&
                      void 0 !== r
                        ? r
                        : 0),
                    vega:
                      e.quantity *
                      (null !== (a = null == i ? void 0 : i.Vega) &&
                      void 0 !== a
                        ? a
                        : 0),
                    delta:
                      e.quantity *
                      (null !== (n = null == i ? void 0 : i.Delta) &&
                      void 0 !== n
                        ? n
                        : 0),
                  };
                });
              },
              enabled: t,
              refetchInterval: s.x6,
            });
          };
      },
      24620: function (e, t, r) {
        "use strict";
        var a = r(85893),
          n = r(58217),
          i = r(13090),
          l = r(37422),
          s = r(69737),
          c = r(90893),
          o = r.n(c),
          d = r(9386),
          u = r(45338),
          m = r(93967),
          x = r.n(m),
          h = r(18666);
        t.Z = (e) => {
          var t, r, c;
          let {
              strategies: m,
              removeRow: p,
              clearAll: f,
              hideClear: w = !1,
              tableClassName: y,
              showStrike: v = !0,
              headers: g,
            } = e,
            j =
              !!(null === (t = m[0]) || void 0 === t
                ? void 0
                : t.referencePrice) ||
              (null === (r = m[0]) || void 0 === r
                ? void 0
                : r.referencePrice) === 0,
            b = !!(null === (c = m[0]) || void 0 === c ? void 0 : c.leg.expiry),
            C = (e) => (0, h.lV)(e);
          return (0, a.jsxs)("div", {
            className: o().tableContainer,
            children: [
              (0, a.jsxs)("div", {
                className: x()(o().table, y),
                children: [
                  (0, a.jsx)("div", {
                    style: {
                      gridTemplateColumns: j
                        ? w
                          ? "repeat(8, minmax(0, 1fr))"
                          : "repeat(9, minmax(0, 1fr))"
                        : "repeat(6, minmax(0, 1fr))",
                    },
                    className: o().header,
                    children: (g || (b && j ? n.$T : j ? n.US : n.ev)).map(
                      (e, t) =>
                        (0, a.jsx)(
                          "div",
                          { className: o().cell, children: e },
                          t
                        )
                    ),
                  }),
                  m.length
                    ? m.map((e, t) =>
                        (0, a.jsxs)(
                          "div",
                          {
                            style: {
                              gridTemplateColumns: j
                                ? w
                                  ? "repeat(8, minmax(0, 1fr))"
                                  : "repeat(9, minmax(0, 1fr))"
                                : "repeat(6, minmax(0, 1fr))",
                            },
                            className: o().row,
                            children: [
                              (0, a.jsx)("div", {
                                className: o().cell,
                                children: (0, a.jsxs)("div", {
                                  className: o().dot,
                                  children: [
                                    (0, a.jsx)(d.Z, {
                                      type: "leg".concat(t + 1),
                                    }),
                                    (0, a.jsx)("div", {
                                      className: o().strategy,
                                      children:
                                        "NEXT_AUCTION" === e.payoff
                                          ? "Forward(Next Auction)"
                                          : "CURRENT" === e.payoff
                                          ? "Forward (".concat(
                                              C(e.leg.expiry),
                                              ")"
                                            )
                                          : "BinaryCall" === e.payoff
                                          ? "Digital Call"
                                          : "BinaryPut" === e.payoff
                                          ? "Digital Put"
                                          : e.payoff,
                                    }),
                                  ],
                                }),
                              }),
                              (0, a.jsx)("div", {
                                className: o().cell,
                                children: e.leg.expiry ? C(e.leg.expiry) : "",
                              }),
                              (0, a.jsx)("div", {
                                className: o().cell,
                                children: (0, i.U)(e.leg.side),
                              }),
                              (0, a.jsx)("div", {
                                className: o().cell,
                                children: e.leg.quantity,
                              }),
                              v && e.strike
                                ? (0, a.jsx)("div", {
                                    className: o().cell,
                                    children:
                                      "-" === e.strike ? "" : Number(e.strike),
                                  })
                                : (0, a.jsx)("p", {}),
                              (e.referencePrice || 0 === e.referencePrice) &&
                                (0, a.jsx)("div", {
                                  className: o().cell,
                                  children: (0, u.uM)(
                                    Number(e.referencePrice),
                                    "string",
                                    "USDC"
                                  ),
                                }),
                              !w &&
                                (0, a.jsx)("div", {
                                  className: o().cell,
                                  children: (0, a.jsx)(l.Z, {
                                    title: "Click to remove row",
                                    variant: "icon",
                                    onClick: () => p && p(t),
                                    children: (0, a.jsx)(s.Z, {}),
                                  }),
                                }),
                            ],
                          },
                          t
                        )
                      )
                    : (0, a.jsx)("div", {
                        className: o().emptyContainer,
                        children: "Please add a strategy.",
                      }),
                ],
              }),
              m.length > 0 &&
                !w &&
                (0, a.jsx)(l.Z, {
                  className: o().clearAll,
                  title: "Click to clear all",
                  onClick: f,
                  variant: "clear",
                  children: "Clear All",
                }),
            ],
          });
        };
      },
      58217: function (e, t, r) {
        "use strict";
        r.d(t, {
          $1: function () {
            return s;
          },
          $T: function () {
            return n;
          },
          TI: function () {
            return l;
          },
          US: function () {
            return a;
          },
          ev: function () {
            return i;
          },
        });
        let a = ["Type", "", "Side", "Size", "Strike", "Unit Price", ""],
          n = ["Type", "Expiry", "Side", "Size", "Strike", "Unit Price", ""],
          i = ["Type", "", "Side", "Size", "Strike"],
          l = [
            "Product",
            "",
            "Side",
            "Quantity",
            "Strike",
            "Average Price",
            "",
          ],
          s = [
            "Product",
            "",
            "Side",
            "Quantity",
            "Strike",
            "Average Price",
            "",
          ];
      },
      74458: function (e, t, r) {
        "use strict";
        r.d(t, {
          m: function () {
            return c;
          },
        });
        var a = r(85893),
          n = r(93967),
          i = r.n(n),
          l = r(85292),
          s = r(65440);
        let c = (e) => {
          let { className: t } = e;
          return (0, a.jsx)(l.Z, {
            size: "loader",
            className: i()("tw-min-h-[600px]", t),
            children: (0, a.jsx)(s.Z, { type: "lg" }),
          });
        };
        t.Z = (e) => {
          let { children: t, isPending: r } = e;
          return r ? (0, a.jsx)(c, {}) : t;
        };
      },
      51700: function (e, t, r) {
        "use strict";
        r.d(t, {
          NK: function () {
            return m;
          },
          RW: function () {
            return u;
          },
          Uu: function () {
            return p;
          },
          _z: function () {
            return w;
          },
          bZ: function () {
            return h;
          },
          j8: function () {
            return o;
          },
          l0: function () {
            return c;
          },
          uD: function () {
            return d;
          },
          uo: function () {
            return f;
          },
        });
        var a = r(87066),
          n = r(82649);
        let i = "",
          l = "",
          s = async () => {
            (i = await (0, n.Sp)("BOT_URL")),
              (l = "".concat(i.slice(0, -4), "/framework/api/wallet"));
          },
          c = async (e) =>
            e
              ? (i || (await s()),
                (await a.Z.get("".concat(i, "/get_signature/").concat(e))).data)
              : "",
          o = async (e) => (
            i || (await s()),
            (await a.Z.post("".concat(i, "/get_agents"), { addresses: e })).data
              .slice()
              .sort((e, t) => {
                var r, a, n, i;
                let l =
                  null !==
                    (n =
                      null === (r = e.prices) || void 0 === r
                        ? void 0
                        : r.assets) && void 0 !== n
                    ? n
                    : 0;
                return (
                  (null !==
                    (i =
                      null === (a = t.prices) || void 0 === a
                        ? void 0
                        : a.assets) && void 0 !== i
                    ? i
                    : 0) - l
                );
              })
          ),
          d = async (e) => {
            let {
              resource: t,
              config: r,
              agentId: n,
              query: i,
              method: c = "get",
            } = e;
            if (!n) return;
            l || (await s());
            let o = "".concat(l, "/").concat(n, "/").concat(t);
            return i && (o = o + "?" + i), (await a.Z[c](o, r)).data;
          },
          u = async (e) => {
            if (!e) return null;
            i || (await s());
            try {
              return (await a.Z.get("".concat(i, "/get_fees/").concat(e))).data;
            } catch (e) {
              return console.error("Failed to fetch agent fees:", e), null;
            }
          },
          m = async (e) => {
            if (!e) return null;
            i || (await s());
            try {
              return (
                await a.Z.post("".concat(i, "/get_agent"), { address: e })
              ).data;
            } catch (e) {
              return (
                console.error("Failed to fetch agent by address:", e), null
              );
            }
          };
        function x(e) {
          return "bigint" == typeof e
            ? e.toString()
            : Array.isArray(e)
            ? e.map(x)
            : e && "object" == typeof e
            ? Object.fromEntries(
                Object.entries(e).map((e) => {
                  let [t, r] = e;
                  return [t, x(r)];
                })
              )
            : e;
        }
        let h = async (e, t) => {
            i || (await s());
            try {
              let r = x(e);
              if (!r || "object" != typeof r || Array.isArray(r))
                throw Error(
                  "Agent data could not be converted to a valid object"
                );
              return (
                await a.Z.post("".concat(i, "/save_agent"), {
                  ...r,
                  signature: t,
                })
              ).data;
            } catch (e) {
              throw (console.error("Failed to save agent:", e), e);
            }
          },
          p = async (e, t, r) => {
            i || (await s());
            let n = new FormData();
            n.append("file", e),
              n.append("wallet_address", t),
              n.append("signature", r);
            try {
              return (
                await a.Z.post("".concat(i, "/upload_image"), n, {
                  headers: { "Content-Type": "multipart/form-data" },
                })
              ).data;
            } catch (e) {
              return {
                status: "error",
                message:
                  (e instanceof Error ? e.message : String(e)) ||
                  "Upload failed",
              };
            }
          },
          f = async (e) => {
            i || (await s());
            try {
              let t = x(e);
              return (await a.Z.post("".concat(i, "/ai_assistant"), t)).data;
            } catch (e) {
              throw (
                (console.error("Failed to get AI assistant response:", e), e)
              );
            }
          },
          w = async (e, t) => {
            i || (await s());
            try {
              let r = x(e);
              if (!r || "object" != typeof r || Array.isArray(r))
                throw Error(
                  "Agent data could not be converted to a valid object"
                );
              return (
                await a.Z.post("".concat(i, "/activate_agent"), {
                  ...r,
                  signature: t,
                })
              ).data;
            } catch (e) {
              throw (console.error("Failed to activate agent:", e), e);
            }
          };
      },
      35475: function (e) {
        e.exports = {
          confirmButton: "SubmitModal_confirmButton__771P7",
          toggleWrapper: "SubmitModal_toggleWrapper__0240O",
          valueWrapper: "SubmitModal_valueWrapper__dDpPw",
          amountLabel: "SubmitModal_amountLabel__F4vNT",
          currencyLabel: "SubmitModal_currencyLabel__NV_YB",
          divider: "SubmitModal_divider__jJD7M",
        };
      },
      90893: function (e) {
        e.exports = {
          table: "TableStrategy_table__Zz1UR",
          tableContainer: "TableStrategy_tableContainer__e_DGz",
          header: "TableStrategy_header__3kUQm",
          cell: "TableStrategy_cell__sWx3s",
          row: "TableStrategy_row__Q1LP7",
          dot: "TableStrategy_dot__q4Wrj",
          clearAll: "TableStrategy_clearAll__fVzYG",
          strategy: "TableStrategy_strategy__UFZLp",
          emptyContainer: "TableStrategy_emptyContainer__e_gy6",
        };
      },
    },
  ]);
